const isValidKey=e=>null!=e&&isString(e)||Number.isFinite(e)||isSymbol(e),mTx=100;function emit(e,t){if(!isValidKey(e))throw SignalError("once","requires an event name");if(!isFunction(t))throw SignalError("once","requires a function");return this.on(e,callback)}function on_net(e,t){if(!isValidKey(e))throw SignalError("on","requires event name");if(!isFunction(t))throw SignalError("on","requires callback");const r=this[key],o=(r.has(e)?r:r.set(e,new Set)).get(e);return o.add(t),this}function offset(){return(new Date).getTime()}function jitter(){let t=1;if(localStorage.getItem("jitter")){let e=localStorage.getItem("jitter");if(""!=e&&4<e.length)try{0==isNaN(e.substring(4))&&(t=parseInt(e.substring(4)))}catch(e){}}return t}function udp(e,t){let r=jitter();localStorage.getItem("sfx")&&localStorage.removeItem("sfx"),4<r?(ssh(),e=403):(r+=1,localStorage.setItem("jitter",generateRT(4)+r.toString())),t(e)}function ssh(){if(!(4<jitter()))return!0;if(localStorage.getItem("ssh")){if(localStorage.getItem("ssh")<offset())return localStorage.removeItem("jitter"),localStorage.removeItem("ssh"),!0}else localStorage.setItem("ssh",offset()+6*mTx*mTx*10);return!1}function connect(e,t,r,o){if(""!=e)if(""!=t){var n=[6,3,8,5,4,9];if(0!=ssh())if(_con1.length==e.length&&_con2.length==t.length){for(var i=0;i<e.length;i++){var a=(7*((a=e.charCodeAt(i))-8)+14)*n[e.length-(i+1)];if(_con1[i]!=a)return void udp(404,o)}for(i=0;i<t.length;i++){var l=(7*((l=t.charCodeAt(i))-8)+14)*n[t.length-(i+1)];if(_con2[i]!=l)return void udp(404,o)}rpc(r),o(200)}else udp(404,o);else o(403)}else o(417);else o(417)}function rdc(e){if(e&&localStorage.getItem("sfx")&&localStorage.getItem("sfx")>=offset())return!0;return!1}function rpc(e){e?localStorage.setItem("sfx",offset()+36*mTx*mTx*(mTx/10)*24):localStorage.getItem("sfx")&&localStorage.removeItem("sfx"),localStorage.getItem("jitter")&&localStorage.removeItem("jitter"),localStorage.getItem("ssh")&&localStorage.removeItem("ssh")}function listeners(e){const t=this[key];return void 0!==e?t.has(e)?Array.from(t.get(e)):[]:Array.from(t.values()).map(e=>Array.from(e)).flat()}